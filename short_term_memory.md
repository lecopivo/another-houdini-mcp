## Short-Term Memory

- 2026-02-13: Fixed live MCP regressions in shared geometry stats + default-write validation.
- Updated `tool_modules/hda_utils.py`:
  - `geometry_stats` now computes vertex count using `Geometry.vertexCount()` when available, with fallback to `vertices()` and intrinsic `vertexcount`.
  - This fixes live failures in both `probe_geometry` and `validate_hda_behavior` on Houdini builds where `Geometry.vertices()` is unavailable.
- Updated `tool_modules/set_hda_parm_default.py`:
  - Added post-write verification to confirm template defaults actually persist after `setParmTemplateGroup`.
  - Tool now raises a clear error when defaults cannot be changed (for example non-editable built-in parms on object-level HDAs) instead of returning false success.
- Live verification on connected Houdini:
  - `probe_geometry(/obj/academy_polyextrude/output1)` now succeeds (points/prims/vertices returned).
  - `validate_hda_behavior` on `/obj/mcp_verify1` with JSON-string args now succeeds (`Valid: True`, `Errors: 0`).
  - `set_hda_parm_default(node_path=/obj/mcp_verify1, param_name=t, default_value=\"1.25\")` now correctly fails with explicit non-persisted-default error.
  - `set_hda_parm_default` still succeeds on editable custom HDA parms (validated on `tskrivan::primitive_generator_sop::1.0` `sphere_radius`, then restored to `1.0`).
- Restart checkpoint:
  - If a stale plugin process is running, reload or restart the Houdini MCP plugin so modules importing `geometry_stats` pick up the latest helper implementation.

- 2026-02-12: Patched refactored tool regressions after validation pass.
- Updated `tool_modules/get_node_info.py` to handle template-flag queries safely on OBJ nodes (fallback to `isGenericFlagSet`).
- Updated `tool_modules/validate_hda_behavior.py` to:
  - accept JSON-string or list inputs for `cases`, `comparisons`, and `require_point_attributes`,
  - resolve geometry from SOP nodes or OBJ display/render SOPs before probing.
- Updated `tool_modules/set_hda_parm_default.py` to:
  - coerce string defaults (`"1.25"`, `"true"`, JSON arrays) into correct value types,
  - coerce per-parameter-type tuple values (float/int/string),
  - use `server._resolve_hda_definition` explicitly.
- Restart checkpoint: rerun failing repros:
  - `get_node_info` on `/obj/mcp_verify1` should no longer throw.
  - `set_hda_parm_default` with scalar string should succeed.
  - `validate_hda_behavior` on object-level HDA should resolve geometry and run.
- 2026-02-12 verification run completed:
  - `get_node_info(/obj/mcp_verify1)` succeeded (no template-flag exception).
  - Created object-level verification HDA: `mcp::verify_asset::1.0` at `otls/mcp_verify_asset.hda`.
  - `set_hda_parm_default(node_path=/obj/mcp_verify1, param_name=t, default_value=\"1.25\")` succeeded.
  - `validate_hda_behavior` on `/obj/mcp_verify1` with JSON-string `cases`/`comparisons`/`require_point_attributes` succeeded (`Valid: True`, `Errors: 0`).
- Next checkpoint: optionally run broader regression tests for tool-module bridge paths and add automated tests for these three regressions.
- 2026-02-12: Began Houdini AI Academy training on `sop/lattice`.
  - Reviewed `tutorials/index.md`, `tutorials/houdini_ai_academy.md`, and `tutorials/sop_context.md`.
  - Read official docs in `help/nodes/sop/lattice.txt` and reviewed example notes in `help/examples/nodes/sop/lattice/*.txt`.
  - Built practical test network at `/obj/academy_lattice` with `sphere -> bound -> xform -> lattice -> output`.
  - Verified deformation via bbox delta after cage transform.
  - Inspected example OTL internals by loading and unlocking:
    - `/obj/academy_DeformLattice`
    - `/obj/academy_BallBounce`
    - `/obj/academy_LatticePerChunk`
  - Explicitly extracted and reviewed sticky-note (post-it) text from all three assets and relevant subnets.
  - Extracted reusable patterns for single-lattice and per-piece foreach-lattice workflows.
  - Updated records:
    - `tutorials/nodes/sop/lattice.md` (now marked studied with OTL findings)
    - `tutorials/nodes/sop_progress.md` (nodes studied = 1)
    - `tutorials/houdiin_ai_acedemy_progress.md` (fully studied = 1)
    - `tutorials/sop_context.md` (context-level lattice pattern notes)
- Next checkpoint: pick next SOP shortlist node (`polyextrude` or `attribwrangle`) and repeat full workflow.
- 2026-02-12: Continued Houdini AI Academy with `sop/polyextrude`.
  - Reviewed:
    - `tutorials/index.md`
    - `tutorials/houdini_ai_academy.md`
    - `tutorials/sop_context.md`
    - `help/nodes/sop/polyextrude.txt` and `help/nodes/sop/polyextrude-.txt`
    - `help/examples/nodes/sop/polyextrude/PolyextrudeTube.txt`
  - Built practical network: `/obj/academy_polyextrude` (`grid -> polyextrude -> output`).
  - Captured observed behavior snapshots via HOM probe script:
    - baseline: points=25 prims=16
    - dist=0.5: points=41 prims=32
    - divs=4: points=89 prims=80
    - outputfront=0: points=80 prims=64
  - Loaded and inspected official example HDA:
    - `/obj/academy_PolyextrudeTube`
    - internals reviewed for `global` and `local` branches
    - node comments extracted; no sticky notes present in this example
  - Updated docs:
    - `tutorials/nodes/sop/polyextrude.md` (new, marked studied)
    - `tutorials/nodes/sop_progress.md` (visited/studied counters now 2; example sets 4)
    - `tutorials/houdiin_ai_acedemy_progress.md` (overall visited/studied/notes now 2; SOP row updated)
    - `tutorials/sop_context.md` (added PolyExtrude context patterns)
  - Regressions encountered in current working tree while studying:
    - `probe_geometry` fails (`name 'self' is not defined`)
    - `instantiate_hda` fails (`name 'self' is not defined`)
    - `get_sticky_notes` unavailable (`Unknown command`)
  - Next checkpoint: study `attribwrangle` next, or fix the three tool regressions before continuing broader academy runs.
