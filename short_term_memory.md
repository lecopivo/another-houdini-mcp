## Short-Term Memory

- 2026-02-13: Created example setups for VEX proximity functions.
- Created networks:
  - `/obj/nearpoint_example`: sphere + scatter + attribwrangle using `nearpoint(1, @P)` with input 1 wired to target
  - `/obj/planepoint_example`: grid + attribwrangle using `planepointdistance()` for plane distance
- Updated help docs with examples:
  - `help/vex/functions/nearpoint.txt`
  - `help/vex/functions/nearpoints.txt`  
  - `help/vex/functions/planepointdistance.txt`
- Updated `memory/sop_context.md` with wrangle geometry reference pattern (section 83):
  - Prefer relative input references like `nearpoint(1, @P)` over hardcoded paths
  - Always wire corresponding input before using input-index references
  - No need to unlock native Houdini nodes (only HDAs need unlocking)

- 2026-02-13: Created new `open_help_browser` tool
- Tool location: `tool_modules/open_help_browser.py`
- Registered in: `tool_modules/registry.py` (import + TOOL_MODULES entry)
- Features:
  - Opens Houdini Help Browser via Python HOM
  - Supports: node_type, help_path, concept, vex_function, python_command, command
  - Concepts mapped: crowds, pyro, vellum, flip, ocean, destruction, etc.
- Next step: Restart MCP server to pick up new tool

- 2026-02-13: Completed requested 3-node uninterrupted deep-study chunk.
- Nodes covered:
  - `fur` (`FurBall`, `PointFur`)
  - `gluecluster` (`glueclusterexample`)
  - `graphcolor` (`FindNonInteractingAgents` + controlled live repro)
- Deep-play highlights:
  - `fur`: validated area-density vs explicit-root generation contracts; in point-root mode, root count dominated hair count while `segs` dominated geometry size.
  - `gluecluster`: validated strength tier mapping and effects of `randomdetach` + `addclusternoise` on cluster distribution and bond mix.
  - `graphcolor`: validated point/primitive/polygon-edge modes, sorted output behavior, and workset detail arrays for batching.
- Memory updates:
  - added `memory/nodes/sop/fur.md`
  - added `memory/nodes/sop/gluecluster.md`
  - added `memory/nodes/sop/graphcolor.md`
  - updated SOP progress, academy totals, and SOP context patterns.

- 2026-02-13: Completed requested 3-node uninterrupted deep-study chunk.
- Nodes covered:
  - `grid` (`GridBasic`)
  - `groupcopy` (`GroupCopyBox`)
  - `groupexpand` (`GroupExpandBasic`)
- Deep-play highlights:
  - `grid`: validated representation matrix (quads/triangles/rows/cols/mesh/NURBS/Bezier/points-only) and orientation plane switching.
  - `groupcopy`: validated conflict modes (`skip`, `overwrite`, `addsuffix`) with real destination-side preexisting group.
  - `groupexpand`: validated grow/shrink via positive/negative steps and normal-angle constrained growth behavior; step attribute output verified.
- Memory updates:
  - added `memory/nodes/sop/grid.md`
  - added `memory/nodes/sop/groupcopy.md`
  - added `memory/nodes/sop/groupexpand.md`
  - updated SOP progress/academy totals and SOP context patterns.

- 2026-02-13: Continued strict one-node deep study with `fractal`.
- Node covered:
  - `fractal` via `FractalGeoTypes` example
- Deep-play observations recorded:
  - `divs` significantly increased topology on both polygon and NURBS branches
  - `scale` increased roughness amplitude while `smooth` strongly reduced roughness variance
  - `vtxnms` changed displacement behavior from axis-biased (`dir`) to surface-normal driven breakup
  - `seed` changed pattern realization while keeping comparable overall roughness class
- Memory updates:
  - added `memory/nodes/sop/fractal.md`
  - updated SOP progress and context patterns

- 2026-02-13: Continued strict one-node deep study with `force`.
- Node covered:
  - `force` via `ForceBasic` example plus additional clean live repro network.
- Deep-play observations recorded:
  - verified attribute-gating behavior (`doradial`, `doaxis`) and exact output attribute mapping (`axial->fedge`, etc.)
  - confirmed non-metaball input passes through without force attributes
  - confirmed example directional branch emits full directional force attribute set
- Memory updates:
  - added `memory/nodes/sop/force.md`
  - updated SOP progress and SOP context patterns

- 2026-02-13: Continued strict one-node deep study with `fluidsource`.
- Node covered:
  - `fluidsource` via `TorusVolume` and `ColourAdvect` examples (node doc file missing locally)
- Deep-play observations recorded:
  - `divsize` strongly changed voxel resolution in source fields
  - `make_sdf` and `invert_sign` changed signed field ranges/semantics
  - `use_noise` materially changed source amplitude
  - in colour workflow, `density` and `Cd.*` fields came from separate branches with different resolutions
  - `smoke_source` setup emitted both `density` and `temperature` fields
- Memory updates:
  - added `memory/nodes/sop/fluidsource.md`
  - updated SOP progress and context patterns with fluid-source field-contract guidance

- 2026-02-13: Continued strict one-node deep study with `font`.
- Node covered:
  - `font` via `FontBasic` and `BubblyFont` examples
- Deep-play observations recorded:
  - primitive type changed tessellation density on same text
  - `addattrib` correctly emitted `textsymbol` and `textindex`
  - `lod` massively changed point counts on curved glyphs (`OOOO` low vs high lod)
  - control-character text can produce empty geometry (valid behavior)
  - expression-driven demo parameters can mask manual parameter edits if not accounted for
- Memory updates:
  - added `memory/nodes/sop/font.md`
  - updated SOP progress and context patterns

- 2026-02-13: Continued strict one-node deep study with `findshortestpath`.
- Node covered:
  - `findshortestpath` via `DirectedEdgesPath` and `PathAnalysis` examples
- Deep-play observations recorded:
  - directed-primitive constraints can make endpoints unreachable (no path primitives emitted)
  - disabling directed constraints restored reachability for previously unreachable endpoint tests
  - output-path metadata attrs (`startpt`, `endpt`, `pathcost`) correctly emitted with sentinel `-1` on non-path prims
  - in analysis branch, point cost attribute materially changed route-cost distributions vs no-cost branch
  - `omitdistance` interaction: without alternate costs produced zero-cost field; with point costs produced weight-only costs
- Memory updates:
  - added `memory/nodes/sop/findshortestpath.md`
  - updated SOP progress and context patterns

- 2026-02-13: Continued strict one-node deep study with `fit`.
- Node covered:
  - `fit` via `examples/nodes/sop/fit/FitCurves.txt` and `examples/nodes/sop/fit/FitSurfaces.txt`
- Deep-play observations recorded:
  - interpolation scope changed curve/surface CV counts significantly
  - NURBS vs Bezier output type strongly affected point density
  - approximation order increased output density on surface example
  - observed major density jumps with Bezier + breakpoint/global scope combinations
- Memory updates:
  - added `memory/nodes/sop/fit.md`
  - updated progress/context totals and SOP context with fit stability pattern

- 2026-02-13: Continued strict one-node deep study with `fillet`.
- Node covered:
  - `fillet` via `examples/nodes/sop/fillet/GridFillet.txt`
- Deep-play observations recorded:
  - direction (`U` vs `V`) significantly changed bridge density (`240 pts` vs `330 pts` in tested setup)
  - higher order increased density (`order 4 -> 6` raised points)
  - width/scale combinations changed bridge footprint and bounds
  - `cut` interaction with direction could collapse bridge result (`dir=V`, `cut=1` -> `140 pts / 2 prims`)
- Memory updates:
  - added `memory/nodes/sop/fillet.md`
  - updated `memory/nodes/sop_progress.md`
  - updated `memory/houdiin_ai_acedemy_progress.md`
  - updated `memory/sop_context.md`

- 2026-02-13: Continued strict one-node deep study with `falloff`.
- Node covered:
  - `falloff` via `examples/nodes/sop/falloff/falloff_twisted_squab.txt`
- Deep-play observations recorded:
  - radius changed influence group size significantly (`insideRad` ~2678 at `rad=3`, ~279 at `rad=1`)
  - reverse flipped influence distribution (mean of `vis_falloff` moved from low to high)
  - unbounded output generated values >1 and caused downstream `lerp` extrapolation (large displacement)
  - renaming `distattr` broke downstream wrangle contract (`@vis_falloff`), resulting in zero deformation
- Memory updates:
  - added `memory/nodes/sop/falloff.md`
  - updated `memory/nodes/sop_progress.md`
  - updated `memory/houdiin_ai_acedemy_progress.md`
  - updated `memory/sop_context.md`

- 2026-02-13: Study plan tightened to prevent lazy batch summaries.
- Updated `memory/houdini_ai_academy.md` with:
  - mandatory deep per-node live parameter play,
  - explicit anti-sloppy rule (no generic batch-note completion),
  - one-node end-to-end completion protocol before moving on.

- 2026-02-13: Reworked study quality standard to deep per-node exploration (no batch-generic summaries).
- Fully re-studied `delete` with careful live play across both official examples (`DeleteDemo`, `DeleteFan`).
- Performed multiple before/after probes on real parameter interactions:
  - range rhythm (`select1/select2`), invert (`negate`), random (`userandom/percent`), and orphan retention (`keeppoints`).
- Updated `memory/nodes/sop/delete.md` to detailed reusable guidance with concrete parameter/geometry deltas and failure modes.

- 2026-02-13: Continued strict deep-play pass and completed another 10 nodes.
- Deep-studied nodes:
  - `edgecollapse`, `edgecusp`, `edgedivide`, `edgeequalize`, `edgeflip`, `edgefracture`, `edgestraighten`, `edit`, `extracttransform`, `facet`
- Deep-play highlights:
  - `edgecollapse`: disabling degenerate removal changed primitive count (`3 -> 4`) in tested branch.
  - `edgedivide`: `numdivs 4 -> 5` increased point count (`28 -> 32`) in active branch.
  - `extracttransform`: enabling distortion added `distortion` attribute without changing point count.
  - `facet`: cusp toggle altered shading/share behavior with stable topology in tested branch.
- Process:
  - One-by-one load, probe baseline, tweak key parm(s), probe again, delete node, continue.
- Memory updates:
  - Added/updated 10 node notes and refreshed progress/context totals.

- 2026-02-13: Started stricter "deep play" SOP pass (per-node parameter interaction checks) and completed 10 nodes.
- Deep-studied nodes:
  - `curveclay`, `delete`, `deltamush`, `dissolve`, `distancealonggeometry`, `distancefromgeometry`, `divide`, `dopimportrecords`, `duplicate`, `extrude`
- Deep-play highlights:
  - `dissolve`: toggling invert selection collapsed output from `8 pts / 5 prims` to `2 pts / 1 prim` in example branch.
  - `distancealonggeometry` / `distancefromgeometry`: disabling mask output removes `mask` attr while preserving `dist`.
  - `dopimportrecords`: `field` filter narrowed imported attributes without changing point count.
  - `duplicate`: `ncy 5 -> 6` increased output from `48/36` to `56/42` (pts/prims).
  - `extrude`: `depthxlate` changed placement while topology remained stable in tested font setup.
- Process:
  - For each node: load official example, probe baseline, tweak key parameter(s), probe again, then delete example before next node.
- Memory updates:
  - Added/updated 10 node notes with explicit before/after observations.
  - Updated SOP progress and academy totals, and added new SOP context patterns.

- 2026-02-13: Continued one-by-one SOP academy pass and completed another 15 nodes.
- Newly studied nodes:
  - `clusterpoints`, `comb`, `convert`, `convertline`, `cookie`, `copy`, `crease`, `creep`, `crowdmotionpath`, `crowdmotionpathavoid`, `crowdmotionpathfollow`, `crowdmotionpathlayer`, `crowdmotionpathtransition`, `crowdsource`, `curve`
- Process followed:
  - Same strict sequence: instantiate one official example, validate cook/output, delete instance, then move to next node.
- Memory updates:
  - Added 15 new node notes under `memory/nodes/sop/`.
  - Updated progress totals and SOP context patterns for crowd path and conversion/legacy-node usage.

- 2026-02-13: Continued unattended one-by-one SOP academy pass and completed 15 more nodes.
- Newly studied nodes:
  - `blendshapes`, `block_end`, `bulge`, `cache`, `cap`, `captureattribunpack`, `carve`, `chain`, `channel`, `circle`, `circlefromedges`, `clay`, `clip`, `clothdeform`, `cloudbillowynoise`
- Process followed:
  - Same strict sequence: instantiate one official example, validate cook/output, delete instance, then move to next node.
- Memory updates:
  - Added 15 new node notes under `memory/nodes/sop/`.
  - Updated SOP/academy progress totals and `memory/sop_context.md` with additional reusable patterns.

- 2026-02-13: Continued SOP academy study in strict one-by-one mode and completed 20 additional nodes.
- Newly studied nodes:
  - `agentlayer`, `agentrelationship`, `agentvellumunpack`, `align`, `apex--editgraph`, `attribcomposite`, `attribcopy`, `attribcreate`, `attribfade`, `attribfill`, `attribfrompieces`, `attribfromvolume`, `attribpaint`, `attribremap`, `attribreorient`, `attribstringedit`, `attribtransfer`, `attribute`, `bakevolume`, `bend`
- Process followed:
  - Loaded first official example for each node, instantiated, validated cook/output, then deleted instance before moving to next node.
- Notable note:
  - `apex--editgraph` has no local SOP doc file (`help/nodes/sop/apex--editgraph.txt` missing), but official example study completed successfully.
- Memory updates:
  - Added 20 new node notes under `memory/nodes/sop/` for this batch.
  - Updated `memory/nodes/sop_progress.md`, `memory/houdiin_ai_acedemy_progress.md`, and `memory/sop_context.md`.

- 2026-02-13: Ran requested 50-node SOP smoke-test batch (next unstudied example nodes) without pausing.
- Scope:
  - `agentlayer`, `agentrelationship`, `agentvellumunpack`, `align`, `apex--editgraph`, `attribcomposite`, `attribcopy`, `attribcreate`, `attribfade`, `attribfill`, `attribfrompieces`, `attribfromvolume`, `attribpaint`, `attribremap`, `attribreorient`, `attribstringedit`, `attribtransfer`, `attribute`, `bakevolume`, `bend`, `blendshapes`, `block_end`, `bulge`, `cache`, `cap`, `captureattribunpack`, `carve`, `chain`, `channel`, `circle`, `circlefromedges`, `clay`, `clip`, `clothdeform`, `cloudbillowynoise`, `clusterpoints`, `comb`, `convert`, `convertline`, `cookie`, `copy`, `crease`, `creep`, `crowdmotionpath`, `crowdmotionpathavoid`, `crowdmotionpathfollow`, `crowdmotionpathlayer`, `crowdmotionpathtransition`, `crowdsource`, `curve`
- Method:
  - For each node, selected first local example under `help/examples/nodes/sop/<node>/`, installed asset, instantiated in `/obj`, performed lightweight cook check when possible, and destroyed the instance.
- Result:
  - 50/50 pass, 0 failures.
  - One doc-path exception: `help/nodes/sop/apex--editgraph.txt` missing while example asset still instantiated successfully.

- 2026-02-13: Completed requested uninterrupted 15-node SOP batch one-by-one.
- Studied nodes:
  - `extrudevolume`, `tube`, `vdbfrompolygons`, `vdbactivate`, `volumewrangle`, `volume`, `volumesdf`, `primitive`, `filecache`, `subnet`, `output`, `testgeometry_rubbertoy`, `box`, `sphere`, `add`
- Example handling rule honored:
  - Loaded and studied one example asset at a time, then deleted it before loading the next example asset.
  - Examples explicitly inspected/deleted in sequence:
    - `/obj/academy_PrimitiveColors` (deleted)
    - `/obj/academy_BoxSpring` (deleted)
    - `/obj/academy_SphereTypes` (deleted)
    - `/obj/academy_AddItUp` (deleted)
- Live validation networks created:
  - `/obj/academy_extrudevolume_live`, `/obj/academy_tube_live`, `/obj/academy_vdbfrompolygons_live`, `/obj/academy_vdbactivate_live`, `/obj/academy_volumewrangle_live`, `/obj/academy_volume_live`, `/obj/academy_volumesdf_live`, `/obj/academy_primitive_live`, `/obj/academy_filecache_live`, `/obj/academy_subnet_live`, `/obj/academy_output_live`, `/obj/academy_testgeometry_rubbertoy_live`, `/obj/academy_box_live`, `/obj/academy_sphere_live`, `/obj/academy_add_live`
- Key observed outcomes:
  - `tube` and `sphere` analytic-to-polygon switch confirmed large topology change.
  - `vdbfrompolygons` enabling fog created second VDB primitive (`surface + density`).
  - `primitive` color write created primitive `Cd`.
  - `filecache` with `loadfromdisk=1` and no cache file produced empty output.
  - `add` point-only mode confirmed (`100 pts / 0 prims`) with `keep=1` and `remove=0`.
- Memory updates:
  - Added node notes for all 15 studied nodes (updated existing `sphere.md` to full study format).
  - Updated `memory/nodes/sop_progress.md`, `memory/houdiin_ai_acedemy_progress.md`, and `memory/sop_context.md`.

- 2026-02-13: Continued overnight SOP batch one-by-one and completed next 3 nodes.
- Studied nodes:
  - `attribfrommap`, `attribnoise`, `attribadjustcolor`
- Example coverage status:
  - No local node-scoped example folders found for these 3 nodes in `help/examples/nodes/sop/<node>/`.
  - Used documented fallback strategy: official docs + live validation networks.
- Live validation networks:
  - `/obj/academy_attribfrommap_live`
  - `/obj/academy_attribnoise_live`
  - `/obj/academy_attribadjustcolor_live`
- Key observed outcomes:
  - `attribfrommap`: changing `export_attribute` to `density` creates point `density` (topology unchanged).
  - `attribnoise`: changing `attribs` to `pscale` creates point `pscale` (attribute-only modification).
  - `attribadjustcolor`: changing `attrib` to `myCd` writes custom point color attr `myCd`.
- Memory updates:
  - added `memory/nodes/sop/attribfrommap.md`
  - added `memory/nodes/sop/attribnoise.md`
  - added `memory/nodes/sop/attribadjustcolor.md`
  - updated `memory/nodes/sop_progress.md`
  - updated `memory/houdiin_ai_acedemy_progress.md`
  - updated `memory/sop_context.md`

- 2026-02-13: Continued SOP node studies with a 3-node batch: `subdivide`, `file`, `bound`.
- Docs and examples reviewed:
  - `nodes/sop/subdivide.txt`, `examples/nodes/sop/subdivide/SubdivideCrease.txt`
  - `nodes/sop/file.txt`, `examples/nodes/sop/file/PackedPoints.txt`
  - `nodes/sop/bound.txt`, `examples/nodes/sop/bound/BoundingBox.txt`
- Example OTLs loaded and inspected:
  - `/obj/academy_SubdivideCrease`
  - `/obj/academy_PackedPoints`
  - `/obj/academy_BoundingBox`
- Live validation networks created:
  - `/obj/academy_subdivide_live`
  - `/obj/academy_file_live`
  - `/obj/academy_bound_live`
- Key observed checks:
  - `subdivide` depth scaling: `26/24 -> 98/96 -> 386/384` (pts/prims) for iterations `1/2/3`.
  - `file` mode behavior confirmed: write creates `/tmp/academy_file_live.bgeo.sc`; read ignores changed input; no-op passes through input.
  - `bound` box vs sphere output forms validated; enabling radii/xform toggles adds detail attrs `radii`, `xform`.
- Memory updates:
  - added `memory/nodes/sop/subdivide.md`
  - added `memory/nodes/sop/file.md`
  - added `memory/nodes/sop/bound.md`
  - updated `memory/sop_context.md`
  - updated `memory/nodes/sop_progress.md`
  - updated `memory/houdiin_ai_acedemy_progress.md`

- 2026-02-13: Built new clean ocean FLIP setup from scratch based on corrected notes.
- Network:
  - `/obj/academy_flip_setup4_ocean_clean`
  - `box -> flipcontainer -> flipsolver(0/1/2)` and `oceanspectrum -> oceanevaluate -> flipsolver(3)`
  - downstream `fluidcompress -> particlefluidsurface -> OUT_OCEAN`
- Verification:
  - connectivity matches `geo1` ocean pattern
  - output remains non-zero across sampled frames (no collapse)
- Memory updates:
  - `memory/nodes/sop/flipsolver.md` (added verified clean ocean recipe + settings)
  - `memory/sop_context.md` (added explicit no-`flipboundary` rule for pure ocean-boundary path)

- 2026-02-13: User asked to list all new `/obj/geo1` nodes, add them to academy plan, and start next 10 studies.
- Plan update:
  - Added `/obj/geo1` discovery node list to `memory/houdini_ai_academy.md`.
- Studied next 10 nodes (SOP):
  - `flipcontainer`, `flipboundary`, `flipcollide`, `fluidcompress`, `particlefluidsurface`,
  - `whitewatersource`, `whitewatersolver`, `whitewaterpostprocess`,
  - `oceanspectrum`, `oceanevaluate`.
- Added notes:
  - `memory/nodes/sop/flipcontainer.md`
  - `memory/nodes/sop/flipboundary.md`
  - `memory/nodes/sop/flipcollide.md`
  - `memory/nodes/sop/fluidcompress.md`
  - `memory/nodes/sop/particlefluidsurface.md`
  - `memory/nodes/sop/whitewatersource.md`
  - `memory/nodes/sop/whitewatersolver.md`
  - `memory/nodes/sop/whitewaterpostprocess.md`
  - `memory/nodes/sop/oceanspectrum.md`
  - `memory/nodes/sop/oceanevaluate.md`
- Progress updates:
  - `memory/nodes/sop_progress.md`: 44 studied SOP nodes.
  - `memory/houdiin_ai_acedemy_progress.md`: 47 total studied nodes.
  - `memory/sop_context.md`: added whitewater/ocean companion pattern.

- 2026-02-13: Studied SOP FLIP reference network in `/obj/geo1` and documented reusable pattern.
- Work completed:
  - inspected all major branch topologies and stream wiring contracts (0/1/2 fluid streams + optional solver input 3 ocean boundary)
  - read docs for all unique top-level/subnet node types involved in the SOP FLIP setups
  - extracted canonical build order and variants (minimal tank, source/sink, collide, ocean boundary, whitewater extension, adaptive domain shaping)
- Docs updated:
  - added `memory/nodes/sop/flipsolver.md`
  - updated `memory/sop_context.md` with SOP FLIP pattern section
  - updated `memory/nodes/sop_progress.md` and `memory/houdiin_ai_acedemy_progress.md`

- 2026-02-13: Revisited `guidedeform` after user feedback and corrected validation depth.
- Read docs again and verified mode semantics with explicit repro:
  - `skin`, `capturedeform`, `capture`, `deform`
  - confirmed node exposes 5 inputs: deform geo, rest skin, animated skin, rest guides, animated guides.
- New test network:
  - `/obj/academy_guidedeform_guides`
  - validates one-step `capturedeform` vs two-step `capture -> deform` parity (pointwise identical in sampled frames).
- Updated note:
  - `memory/nodes/sop/guidedeform.md` now includes corrected mode-focused setup, frame displacement checks, and gotchas.

- 2026-02-13: Added `memory/dop_context.md` as DOP-context companion to SOP context.
- Includes:
  - compressed DOP network fundamentals (state, time/substeps, bindings, SOP<->DOP workflow)
  - rolling short-note section for studied DOP nodes
  - initial notes for `vellumsource`, `vellumconstraintproperty`, `vellumrestblend`
- Updated `memory/index.md` to link `DOP Context Basics`.

- 2026-02-13: Completed requested 10-node follow-up list (with node-availability mapping where needed).
- SOP nodes completed:
  - `vellumconstraints_grain`, `vellumpostprocess`, `vellumio`, `vellumconfigurecloth` (workflow note), `vellumconfigurehair` (workflow note), `guidedeform`, `tetconform`.
- DOP nodes completed:
  - `vellumsource`, `vellumconstraintproperty`, `vellumrestblend`.
- Availability note:
  - No standalone SOP node types named `vellumconfigurecloth`/`vellumconfigurehair` in this build; documented equivalent workflow via `vellumconstraints` (`constrainttype=cloth` / `hair`).
- Example coverage:
  - No local example folders for most nodes above; fallback companion coverage used.
  - Reviewed official `sop/vellumrestblend/BasicRestBlend` example as companion for rest-blend workflows.
- Live validation setups created:
  - `/obj/academy_vellumconstraints_grain`
  - `/obj/academy_guidedeform`
  - `/obj/academy_tetconform`
  - `/obj/academy_vellum_dop_nodes`
- Progress updates:
  - `memory/nodes/sop_progress.md`: 33 studied SOP nodes.
  - `memory/nodes/dop_progress.md`: 3 studied DOP nodes.
  - `memory/houdiin_ai_acedemy_progress.md`: overall 36 studied nodes.

- 2026-02-13: Started next Vellum-focused academy batch; completed `sop/vellumconstraints_grain`.
- Docs reviewed:
  - `help/nodes/sop/vellumconstraints_grain.txt`
- Example coverage:
  - No local `help/examples/nodes/sop/vellumconstraints_grain/` folder in corpus.
  - Used fallback companion coverage + live custom validation network.
- Live validation setup:
  - `/obj/academy_vellumconstraints_grain` with `sphere -> vellumconstraints_grain -> vellumsolver`.
  - Verified generated attrs and counts (`isgrain`, `pscale`, `mass`, etc.) and frame-wise settling behavior.
  - Confirmed practical stability baseline with `solver.substeps=5` and ground-plane collision.
- Docs updated:
  - Added `memory/nodes/sop/vellumconstraints_grain.md`
  - Updated `memory/nodes/sop_progress.md` and `memory/houdiin_ai_acedemy_progress.md`

- 2026-02-13: Added SOP study note for `vellumconstraints` after live hair-pin debugging session.
- Docs reviewed:
  - `help/nodes/sop/vellumconstraints.txt`
- Example coverage:
  - No local `help/examples/nodes/sop/vellumconstraints/` folder in corpus.
  - Used fallback companion coverage from `sop/vellumsolver` examples + custom live setups.
- Key observed outcomes:
  - Separate staged constraints (`hair` then `pin`) are clearer and easier to debug.
  - Empty/wrong-class groups can silently disable constraints and mimic solver instability.
  - Validating group non-emptiness before solve is a high-value check.
- Docs updated:
  - Added `memory/nodes/sop/vellumconstraints.md`
  - Added `memory/nodes/sop/sphere.md`
  - Updated `memory/nodes/sop/group.md` (non-empty group gotcha)
  - Updated `memory/nodes/sop_progress.md` and `memory/houdiin_ai_acedemy_progress.md`

- 2026-02-13: Studied `sop/vellumsolver` with full local example sweep and heavy-solver hygiene.
- Docs reviewed:
  - `help/nodes/sop/vellumsolver.txt`
  - `help/examples/nodes/sop/vellumsolver/*.txt` (18 examples)
- Example handling policy followed for compute-heavy content:
  - Loaded exactly one example at a time, inspected, then deleted it before loading the next.
- Examples loaded/inspected (all deleted after inspection):
  - `AnimatedConstraints`, `AnimatedPressure`, `ArmLayer`, `ArmTarget`, `CollisionDisable`, `CollisionIgnore`, `DynamicAttach`, `DynamicStitchGlue`, `GluedGrains`, `HairOrient`, `ResolutionTarget`, `SimpleWeld`, `StiffnessDropoff`, `TetrahedralFiber`, `VaryingFriction`, `VellumFluidPhasesStart`, `VellumFluidPhasesReference`, `VellumFluidSetupGeo`.
- Key observed outcomes:
  - Dynamic constraint creation/update pattern repeatedly appears inside `vellumsolver/dopnet/forces`.
  - Collision control examples confirm practical use of `collisionignore`, `collisiongroup`, and `disableexternal` attrs.
  - Layering (`layer` + `layershock`) and multi-res targeting are strong reusable workflows.
  - Fluid phase example confirms DOP-side Vellum Source pattern; direct solver output may be empty at start frame while display merge contains collider/scene geometry.
- Docs updated:
  - Added `memory/nodes/sop/vellumsolver.md`
  - Updated `memory/nodes/sop_progress.md` (25 studied SOP nodes; example sets reviewed 44)
  - Updated `memory/houdiin_ai_acedemy_progress.md` (overall studied/notes 25; SOP 10.6%)
  - Updated `memory/sop_context.md` (added Vellum Solver pattern section)

- 2026-02-13: Finished all previously in-progress SOP notes using fallback coverage for nodes with missing local example folders.
- Completed nodes promoted to studied:
  - `copytopoints`, `boolean`, `switch`, `switchif`, `voronoifracture`, `name`, `groupsfromname`, `error`
- Companion examples additionally reviewed for completion evidence:
  - `help/examples/nodes/sop/copy/StampRandom.*` (switch in production context)
  - `help/examples/nodes/sop/foreach/cheese.*` (looped boolean/cookie context)
  - `help/examples/nodes/sop/surfsect/SurfsectBasic.*` (boolean-style surfsect companion)
- Additional observations recorded:
  - `switch1` in StampRandom is expression-driven from copy stamping.
  - `foreach/cheese` demonstrates boolean logic as companion `cookie` within iterative workflow.
- Progress updates:
  - `memory/nodes/sop_progress.md` now marks 24/24 visited SOP notes as studied.
  - `memory/houdiin_ai_acedemy_progress.md` SOP progress updated to 10.2%.
  - `memory/sop_context.md` updated with missing-example fallback strategy and switch/boolean companion patterns.

- 2026-02-13: Studied/tested SOP nodes `voronoifracture`, `scatter`, `name`, `groupsfromname`, `error`.
- Docs reviewed:
  - `help/nodes/sop/voronoifracture.txt`
  - `help/nodes/sop/scatter.txt`
  - `help/nodes/sop/name.txt`
  - `help/nodes/sop/groupsfromname.txt`
  - `help/nodes/sop/error.txt`
- Examples loaded and inspected:
  - `/obj/academy_SpikyDeformingTorus` and `/obj/academy_DoorWithPolkaDots` from `help/examples/nodes/sop/scatter/*`
  - companion voronoi workflow in `/obj/academy_PackedFragments/sphere`
- Additional live validation network:
  - `/obj/academy_name_groups_error` for `name`/`groupsfromname`/`error` behavior.
- Key observed outcomes:
  - Scatter: stable-point workflows validated via `primnum`/`primuvw` and texture-space mode.
  - Voronoi fracture companion test: increasing scatter seeds `20 -> 40` increased packed pieces `20 -> 40` downstream.
  - Name/GroupsFromName: confirmed `name` values (`part0`, `part1`) and regenerated prefixed groups (`nm_part0`, `nm_part1`).
  - Error: warning severity passes geometry while reporting warning; error severity blocks downstream cook.
- Companion-node updates made in same session:
  - Updated `memory/nodes/sop/assemble.md` (seed-count scaling finding)
  - Updated `memory/nodes/sop/connectivity.md` and `memory/nodes/sop/partition.md` (bridge-pattern findings)
- Docs updated:
  - Added `memory/nodes/sop/voronoifracture.md`
  - Added `memory/nodes/sop/scatter.md`
  - Added `memory/nodes/sop/name.md`
  - Added `memory/nodes/sop/groupsfromname.md`
  - Added `memory/nodes/sop/error.md`
  - Updated `memory/nodes/sop_progress.md`
  - Updated `memory/houdiin_ai_acedemy_progress.md`
  - Updated `memory/sop_context.md`

- 2026-02-13: Studied/tested SOP nodes `switchif`, `attribpromote`, `connectivity`, `partition`, `assemble`.
- Docs reviewed:
  - `help/nodes/sop/switchif.txt`
  - `help/nodes/sop/attribpromote.txt`
  - `help/nodes/sop/connectivity.txt`
  - `help/nodes/sop/partition.txt`
  - `help/nodes/sop/assemble.txt`
- Examples loaded and inspected:
  - `/obj/academy_AttribPromoteSphere` from `help/examples/nodes/sop/attribpromote/AttribPromoteSphere.*`
  - `/obj/academy_ConnectedBalls` from `help/examples/nodes/sop/connectivity/ConnectedBalls.*`
  - `/obj/academy_PartitionBall` from `help/examples/nodes/sop/partition/PartitionBall.*`
  - `/obj/academy_PackedFragments` from `help/examples/nodes/sop/assemble/PackedFragments.*`
- Additional live validation network:
  - `/obj/academy_switchif` (no local official `sop/switchif` example folder)
- Key observed outcomes:
  - Switch-If: element-count test on second input cleanly routes fallback/default branch.
  - AttribPromote: confirmed point `foo` -> primitive `foo` promotion and primitive `Cd` -> point `Cd` demotion.
  - Connectivity: examples use primitive connectivity ids (`ball`/`piece`) as downstream control channels.
  - Partition: example demonstrates connectivity->partition group naming flow for DOP object splitting.
  - Assemble: fracture output packed into 20 packed pieces with name/path metadata for RBD pipeline.
- Companion-node findings captured:
  - Strong companion usage documented for `scatter`, `voronoifracture`, and DOP handoff patterns in assemble/partition examples.
- Docs updated:
  - Added `memory/nodes/sop/switchif.md`
  - Added `memory/nodes/sop/attribpromote.md`
  - Added `memory/nodes/sop/connectivity.md`
  - Added `memory/nodes/sop/partition.md`
  - Added `memory/nodes/sop/assemble.md`
  - Updated `memory/nodes/sop_progress.md`
  - Updated `memory/houdiin_ai_acedemy_progress.md`
  - Updated `memory/sop_context.md`

- 2026-02-13: Studied/tested SOP nodes `fuse`, `group`, `switch`, `polyreduce`, `measure`.
- Docs reviewed:
  - `help/nodes/sop/fuse.txt`
  - `help/nodes/sop/group.txt`
  - `help/nodes/sop/switch.txt`
  - `help/nodes/sop/polyreduce.txt`
  - `help/nodes/sop/measure.txt`
- Examples loaded and inspected:
  - `/obj/academy_FuseHood` from `help/examples/nodes/sop/fuse/FuseHood.*`
  - `/obj/academy_FeaturedEdges` from `help/examples/nodes/sop/group/FeaturedEdges.*`
  - `/obj/academy_PolyreduceBatwing` from `help/examples/nodes/sop/polyreduce/PolyreduceBatwing.*`
  - `/obj/academy_MeasureArea` from `help/examples/nodes/sop/measure/MeasureArea.*`
  - `/obj/academy_MeasureLaplacian` from `help/examples/nodes/sop/measure/MeasureLaplacian.*`
- Additional live validation network:
  - `/obj/academy_switch` (no local official `sop/switch` example folder)
- Key observed outcomes:
  - Fuse: `merge_all` `40 pts` -> `fuse1` `29 pts` with consolidation on; returns to `40 pts` when off.
  - Group + PolyReduce: edge group (`entity=2`) drives crease-preserving reduction; `60% -> 30%` reduces sphere output `432 -> 216` prims.
  - PolyReduce batwing baseline: `30720 -> 3072` prims at `percentage=10`; direct edits blocked on locked example instance.
  - Measure: `measure1` writes `area` attr; switching to perimeter with `attribname=perim_test` writes the new prim attr as expected.
  - Switch: selector routes branches; out-of-range indices clamp to valid range in this build (`-1 -> 0`, `3 -> last input`).
- Docs updated:
  - Added `memory/nodes/sop/fuse.md`
  - Added `memory/nodes/sop/group.md`
  - Added `memory/nodes/sop/switch.md`
  - Added `memory/nodes/sop/polyreduce.md`
  - Added `memory/nodes/sop/measure.md`
  - Updated `memory/nodes/sop_progress.md`
  - Updated `memory/houdiin_ai_acedemy_progress.md`
  - Updated `memory/sop_context.md`

- 2026-02-13: Studied/tested SOP nodes `blast`, `merge`, and `remesh`.
- Docs reviewed:
  - `help/nodes/sop/blast.txt`
  - `help/nodes/sop/merge.txt`
  - `help/nodes/sop/remesh.txt`
- Examples loaded and inspected:
  - `/obj/academy_TorusBlast` from `help/examples/nodes/sop/blast/TorusBlast.*`
  - `/obj/academy_MergeAttributes` from `help/examples/nodes/sop/merge/MergeAttributes.*`
  - `/obj/academy_Squidremesh` from `help/examples/nodes/sop/remesh/Squidremesh.*`
- Additional live validation network:
  - `/obj/academy_merge_live` to test merge attribute propagation behavior explicitly.
- Key observed outcomes:
  - Blast: base deletion reduced torus from `100/100` to `93/91` (pts/prims); `negate=1` isolates to `7/3`.
  - Merge: output carries unioned attributes; in custom repro, missing `Cd` defaults appeared as white `(1,1,1)` rather than zero.
  - Remesh: adaptive example output `36417 pts / 72724 prims`; uniform mode and larger `targetsize` reduce topology substantially.
- Docs updated:
  - Added `memory/nodes/sop/blast.md`
  - Added `memory/nodes/sop/merge.md`
  - Added `memory/nodes/sop/remesh.md`
  - Updated `memory/nodes/sop_progress.md`
  - Updated `memory/houdiin_ai_acedemy_progress.md`
  - Updated `memory/sop_context.md`

- 2026-02-13: Continued Houdini AI Academy SOP study batch (copytopoints, foreach, boolean).
- Reviewed docs:
  - `help/nodes/sop/copytopoints.txt`
  - `help/nodes/sop/block_begin.txt`
  - `help/nodes/sop/block_end.txt`
  - `help/nodes/sop/boolean.txt`
- Reviewed examples/assets:
  - `help/examples/nodes/sop/foreach/AttributeShuffle.*`
  - `help/examples/nodes/sop/foreach/ForEachExamples.*`
  - related copy template example: `help/examples/nodes/sop/copy/CopyTemplateAttribs.*`
- Built/loaded live test networks:
  - `/obj/academy_copytopoints`
  - `/obj/academy_boolean`
  - `/obj/academy_AttributeShuffle`
  - `/obj/academy_ForEachExamples`
  - `/obj/academy_CopyTemplateAttribs`
- Key observed outcomes:
  - `copytopoints`: unpacked output scales to `800 pts / 600 prims`; `pack=1` collapses to `100 pts / 100 prims`.
  - `foreach` (block-based AttributeShuffle): validated piece-loop pattern; sticky notes confirm merge-ordering caveat.
  - `boolean::2.0`: validated union/intersect/subtract behavior with bbox deltas.
  - Local docs corpus has no node-scoped `help/examples/nodes/sop/boolean/` or `.../copytopoints/` folders; marked those notes as in-progress/partial where appropriate.
- Notes/progress updates:
  - Added `memory/nodes/sop/copytopoints.md`
  - Added `memory/nodes/sop/foreach.md`
  - Added `memory/nodes/sop/boolean.md`
  - Updated `memory/nodes/sop_progress.md`
  - Updated `memory/houdiin_ai_acedemy_progress.md`
  - Updated `memory/sop_context.md`

- 2026-02-13: Added reusable example-study tool modules to reduce ad-hoc Python usage.
- New tools added under `tool_modules/` and registered in `tool_modules/registry.py`:
  - `install_hda_file`: install `.otl/.hda` files with optional reload behavior.
  - `list_example_nodes`: enumerate example docs/assets under `help/examples/nodes/<context>/`.
  - `instantiate_example_asset`: install an example asset file and create an instance.
  - `load_example`: resolve official example by `context/node/example_name`, install, and instantiate.
  - `get_node_presentation`: inspect node presentation state (display/render/template/bypass/comment).
- Updated `AGENTS.md` tool list + architecture guidance to reflect module-based tool registration.
- Restart checkpoint:
  - Reload/restart Houdini MCP plugin so newly added tool modules are available to command dispatch.

- 2026-02-13: Fixed live MCP regressions in shared geometry stats + default-write validation.
- Updated `tool_modules/hda_utils.py`:
  - `geometry_stats` now computes vertex count using `Geometry.vertexCount()` when available, with fallback to `vertices()` and intrinsic `vertexcount`.
  - This fixes live failures in both `probe_geometry` and `validate_hda_behavior` on Houdini builds where `Geometry.vertices()` is unavailable.
- Updated `tool_modules/set_hda_parm_default.py`:
  - Added post-write verification to confirm template defaults actually persist after `setParmTemplateGroup`.
  - Tool now raises a clear error when defaults cannot be changed (for example non-editable built-in parms on object-level HDAs) instead of returning false success.
- Live verification on connected Houdini:
  - `probe_geometry(/obj/academy_polyextrude/output1)` now succeeds (points/prims/vertices returned).
  - `validate_hda_behavior` on `/obj/mcp_verify1` with JSON-string args now succeeds (`Valid: True`, `Errors: 0`).
  - `set_hda_parm_default(node_path=/obj/mcp_verify1, param_name=t, default_value=\"1.25\")` now correctly fails with explicit non-persisted-default error.
  - `set_hda_parm_default` still succeeds on editable custom HDA parms (validated on `tskrivan::primitive_generator_sop::1.0` `sphere_radius`, then restored to `1.0`).
- Restart checkpoint:
  - If a stale plugin process is running, reload or restart the Houdini MCP plugin so modules importing `geometry_stats` pick up the latest helper implementation.

- 2026-02-12: Patched refactored tool regressions after validation pass.
- Updated `tool_modules/get_node_info.py` to handle template-flag queries safely on OBJ nodes (fallback to `isGenericFlagSet`).
- Updated `tool_modules/validate_hda_behavior.py` to:
  - accept JSON-string or list inputs for `cases`, `comparisons`, and `require_point_attributes`,
  - resolve geometry from SOP nodes or OBJ display/render SOPs before probing.
- Updated `tool_modules/set_hda_parm_default.py` to:
  - coerce string defaults (`"1.25"`, `"true"`, JSON arrays) into correct value types,
  - coerce per-parameter-type tuple values (float/int/string),
  - use `server._resolve_hda_definition` explicitly.
- Restart checkpoint: rerun failing repros:
  - `get_node_info` on `/obj/mcp_verify1` should no longer throw.
  - `set_hda_parm_default` with scalar string should succeed.
  - `validate_hda_behavior` on object-level HDA should resolve geometry and run.
- 2026-02-12 verification run completed:
  - `get_node_info(/obj/mcp_verify1)` succeeded (no template-flag exception).
  - Created object-level verification HDA: `mcp::verify_asset::1.0` at `otls/mcp_verify_asset.hda`.
  - `set_hda_parm_default(node_path=/obj/mcp_verify1, param_name=t, default_value=\"1.25\")` succeeded.
  - `validate_hda_behavior` on `/obj/mcp_verify1` with JSON-string `cases`/`comparisons`/`require_point_attributes` succeeded (`Valid: True`, `Errors: 0`).
- Next checkpoint: optionally run broader regression tests for tool-module bridge paths and add automated tests for these three regressions.
- 2026-02-12: Began Houdini AI Academy training on `sop/lattice`.
  - Reviewed `memory/index.md`, `memory/houdini_ai_academy.md`, and `memory/sop_context.md`.
  - Read official docs in `help/nodes/sop/lattice.txt` and reviewed example notes in `help/examples/nodes/sop/lattice/*.txt`.
  - Built practical test network at `/obj/academy_lattice` with `sphere -> bound -> xform -> lattice -> output`.
  - Verified deformation via bbox delta after cage transform.
  - Inspected example OTL internals by loading and unlocking:
    - `/obj/academy_DeformLattice`
    - `/obj/academy_BallBounce`
    - `/obj/academy_LatticePerChunk`
  - Explicitly extracted and reviewed sticky-note (post-it) text from all three assets and relevant subnets.
  - Extracted reusable patterns for single-lattice and per-piece foreach-lattice workflows.
  - Updated records:
    - `memory/nodes/sop/lattice.md` (now marked studied with OTL findings)
    - `memory/nodes/sop_progress.md` (nodes studied = 1)
    - `memory/houdiin_ai_acedemy_progress.md` (fully studied = 1)
    - `memory/sop_context.md` (context-level lattice pattern notes)
- Next checkpoint: pick next SOP shortlist node (`polyextrude` or `attribwrangle`) and repeat full workflow.
- 2026-02-12: Continued Houdini AI Academy with `sop/polyextrude`.
  - Reviewed:
    - `memory/index.md`
    - `memory/houdini_ai_academy.md`
    - `memory/sop_context.md`
    - `help/nodes/sop/polyextrude.txt` and `help/nodes/sop/polyextrude-.txt`
    - `help/examples/nodes/sop/polyextrude/PolyextrudeTube.txt`
  - Built practical network: `/obj/academy_polyextrude` (`grid -> polyextrude -> output`).
  - Captured observed behavior snapshots via HOM probe script:
    - baseline: points=25 prims=16
    - dist=0.5: points=41 prims=32
    - divs=4: points=89 prims=80
    - outputfront=0: points=80 prims=64
  - Loaded and inspected official example HDA:
    - `/obj/academy_PolyextrudeTube`
    - internals reviewed for `global` and `local` branches
    - node comments extracted; no sticky notes present in this example
  - Updated docs:
    - `memory/nodes/sop/polyextrude.md` (new, marked studied)
    - `memory/nodes/sop_progress.md` (visited/studied counters now 2; example sets 4)
    - `memory/houdiin_ai_acedemy_progress.md` (overall visited/studied/notes now 2; SOP row updated)
    - `memory/sop_context.md` (added PolyExtrude context patterns)
  - Regressions encountered in current working tree while studying:
    - `probe_geometry` fails (`name 'self' is not defined`)
    - `instantiate_hda` fails (`name 'self' is not defined`)
    - `get_sticky_notes` unavailable (`Unknown command`)
  - Next checkpoint: study `attribwrangle` next, or fix the three tool regressions before continuing broader academy runs.
